#!/usr/bin/env bash
source ~/.local/bin/scripts/colors

LASTLOGIN_STR=`last $USER | head -n 1`
LASTLOGIN_FROM=`echo $LASTLOGIN_STR | awk '{ print($2); }'`
LASTLOGIN=`last $USER | sed '2!d' | awk ' {$1=$2=""; print(substr($0, 3));} '`

KERNEL=`uname -r`
PKGNUM=`ls -d /var/db/pkg/*/* | wc -l`
UPTIME=`uptime -p | sed 's/up //'`

if [ -n "$DISPLAY" ]; then
    WMNAME=`xprop -root _NET_WM_NAME|cut -d\" -f2`
else
    WMNAME="console"
fi


cat << EOF
Last login: $LASTLOGIN on $LASTLOGIN_FROM

${c12}distro       ${c05}Gentoo Linux
${c12}kernel       ${c05}$KERNEL
${c12}packages     ${c05}$PKGNUM
${c12}Uptime       ${c05}$UPTIME
${c12}Shell        ${c05}$SHELL
${c12}WM           ${c05}$WMNAME

EOF

pcs() { for i in {0..7}; do echo -en "\e[${1}$((30+$i))m \u2588\u2588 \e[0m"; done; }
printf "\n%s\n%s\n\n" "$(pcs)" "$(pcs '1;')"
