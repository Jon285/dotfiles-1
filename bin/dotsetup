#!/usr/bin/env bash
# dotsetup
# 
# Personal script to update dotfiles.


# print message, remove old files/directory, and perform a symlink.
function symlink
{
    # check if old file exists.
    # remove the old one and create a new symlink.
    if [ -e $2 ] || [ -L $2 ]; then
        rm $2
    elif [ -d $2 ]; then
        rm -rf $2
    else
        true # do nothing statement.
    fi

    echo "[*] $2 -> $1"
    ln -s $1 $2
}


# prompt user to input username.
echo -n "Make sure you've read the code before running it. [y/n]: "
read choice

# check user directory existence.
if [ -d /home/$USER/ ] && [ "$choice" = "y" ]; then
    echo -e "Proceeding...\n"
else
    echo "Aborted."
    exit 0
fi

# symlink function call.
symlink "/home/$USER/.config/dotfiles/.x" "/home/$USER/.x"
symlink "/home/$USER/.config/dotfiles/.xinitrc" "/home/$USER/.xinitrc"
symlink "/home/$USER/.config/dotfiles/.xserverrc" "/home/$USER/.xserverrc"
symlink "/home/$USER/.config/dotfiles/.Xresources" "/home/$USER/.Xresources"
symlink "/home/$USER/.config/dotfiles/.xbindkeysrc" "/home/$USER/.xbindkeysrc"
symlink "/home/$USER/.config/dotfiles/.functions" "/home/$USER/.functions"

symlink "/home/$USER/.config/dotfiles/.bashrc" "/home/$USER/.bashrc"
symlink "/home/$USER/.config/dotfiles/.zshrc" "/home/$USER/.zshrc"
symlink "/home/$USER/.config/dotfiles/.vim" "/home/$USER/.vim"
symlink "/home/$USER/.config/dotfiles/.vimrc" "/home/$USER/.vimrc"
symlink "/home/$USER/.config/dotfiles/.wgetrc" "/home/$USER/.wgetrc"
symlink "/home/$USER/.config/dotfiles/.curlrc" "/home/$USER/.curlrc"

symlink "/home/$USER/.config/dotfiles/.config/i3" "/home/$USER/.config/i3"
symlink "/home/$USER/.config/dotfiles/.config/i3blocks" "/home/$USER/.config/i3blocks"
symlink "/home/$USER/.config/dotfiles/.config/i3lock" "/home/$USER/.config/i3lock"
symlink "/home/$USER/.config/dotfiles/.config/dunst" "/home/$USER/.config/dunst"
symlink "/home/$USER/.config/dotfiles/.config/compton" "/home/$USER/.config/compton"
symlink "/home/$USER/.config/dotfiles/.config/menutray" "/home/$USER/.config/menutray"
symlink "/home/$USER/.config/dotfiles/.config/plasma-workspace" "/home/$USER/.config/plasma-workspace"
symlink "/home/$USER/.config/dotfiles/.gtkrc-2.0" "/home/$USER/.gtkrc-2.0"
symlink "/home/$USER/.gtkrc-2.0" "/home/$USER/.gtkrc-2.0-kde4"

symlink "/home/$USER/.config/dotfiles/.aliases" "/home/$USER/.aliases"
symlink "/home/$USER/.config/dotfiles/.asoundrc" "/home/$USER/.asoundrc"
symlink "/home/$USER/.config/dotfiles/.config/neofetch" "/home/$USER/.config/neofetch"
symlink "/home/$USER/.config/dotfiles/.config/ncmpcpp" "/home/$USER/.ncmpcpp"
symlink "/home/$USER/.private/git/.gitconfig" "/home/$USER/.gitconfig"

symlink "/home/$USER/.config/dotfiles/bin" "/home/$USER/.local/bin"
symlink "/home/$USER/.config/dotfiles/res/.face.icon" "/home/$USER/.face.icon"
symlink "/home/$USER/Workspaces/02-Projects/bash-displayctl/displayctl" "/home/$USER/.local/bin/displayctl"

symlink "/home/$USER/.config/dotfiles/.gdbinit" "/home/$USER/.gdbinit"


# job finished.
echo -e "\n[*] Congrats. You have updated all symlinks and dotfiles are now ready to be loaded."
