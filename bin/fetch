#!/usr/bin/env bash
source ~/.local/bin/colors

kernel=$(uname -rmo)
cpuspe=$(grep 'model name' /proc/cpuinfo| sed 1q|sed 's/^.*:\ *//')

system=$(sed -n 1p /etc/os-release | tr -d 'NAME=')

if [ -n "$DISPLAY" ]; then
    wmname=$(xprop -root _NET_WM_NAME|cut -d\" -f2)
    termfn=$(xrdb -query | awk '/URxvt.font/ {print $2}' | sed 's/xft://;s/,//;s/:pixelsize//;s/=/\ /;')
    systfn=$(sed -n 's/^[gtk].*font.*"\(.*\)".*$/\1/p' ~/.gtkrc-2.0)
else
    wmname="none"
    termfn="none"
    systfn="none"
fi

pkgnum=$(ls -d /var/db/pkg/*/* | wc -l)
birthd=$(last | tail -n 1 | awk '{ printf("%s %s, %s", $4, $5, $7); }')

giturl="github.com/aesophor"
email="aesophor@mailfence.com"

cat << EOF
${f2}  ╔════╗	
${c16}  ║██  ║ ${c15}OS ${f0}........... $f2$system
${c08}  ║  ██║ ${c15}name ${f0}......... $f2$HOSTNAME
${c01}  ║██  ║ ${c15}birthday${f0}...... $f2$birthd
${c09}  ║  ██║ ${c15}packages ${f0}..... $f2$pkgnum
${c02}  ║██  ║
${c10}  ║  ██║ ${c15}wm ${f0}........... $f2$wmname
${c03}  ║██  ║ ${c15}shell ${f0}........ $f2$SHELL
${c11}  ║  ██║ ${c15}terminal ${f0}..... $f2$TERM
${c04}  ║██  ║ ${c15}term font ${f0}.... $f2$termfn
${c12}  ║  ██║ ${c15}system font ${f0}.. $f2$systfn
${c05}  ║██  ║
${c13}  ║  ██║ ${c15}kernel ${f0}....... $f2$kernel
${c06}  ║██  ║ ${c15}processor ${f0}.... $f2$cpuspe
${c14}  ║  ██║
${c07}  ║██  ║ ${c15}github ${f0}....... $f2$giturl
${c15}  ║  ██║ ${c15}email ${f0}........ $f2$email
${f2}  ╚════╝
EOF

